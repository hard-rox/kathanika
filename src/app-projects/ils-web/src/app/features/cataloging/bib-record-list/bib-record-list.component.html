<div class="space-y-3">
    <div class="flex justify-between">
        <h2 class="text-xl font-bold">Bibliographic Records</h2>
        <a [routerLink]="['create']" kn-button>
            <span class="material-symbols-rounded">add</span>
            New Record</a>
    </div>

    <kn-panel>
        <input
            [value]="searchText"
            (keyup)="onSearchTextChanged($event)"
            type="text"
            placeholder="Search text"
            class="border-theme-gunmetal border p-2 w-full"
        />
    </kn-panel>

    <kn-panel>
        <div class="flex justify-between">
            <div class="flex space-x-2 items-center">
                <p>Sort by: </p>
            </div>
            <div class="flex space-x-2 items-center">
                <p>View: </p>
                <div>
                    <button kn-button variant="outline">
                        <span class="material-symbols-rounded"> table </span>
                    </button>
                    <button kn-button variant="outline">
                        <span class="material-symbols-rounded"> grid_view</span>
                    </button>
                </div>
            </div>
        </div>
    </kn-panel>

    @if (queryRef.valueChanges | async; as queryResult) {
        <kn-panel [isLoading]="queryResult.loading">
            <table>
                <thead>
                <tr>
                    <th scope="col">Serial</th>
                    <th scope="col">Title | Author</th>
                    <th scope="col">Control Number</th>
                    <th scope="col">ISBN/ISSN</th>
                    <th scope="col">Publication</th>
                    <th scope="col">Material Type</th>
                    <th scope="col">Actions</th>
                </tr>
                </thead>
                <tbody>
                    @for (item of queryResult?.data?.bibRecords?.items || []; track item; let idx = $index) {
                        <tr>
                            <td class="text-right">{{ idx + 1 }}</td>
                            <td>
                                <a [routerLink]="[item.id]">{{ item.title }}</a>
                                <p class="text-sm text-theme-davys-gray">{{ item.author }}</p>
                                <!--                                Creation info-->
                            </td>
                            <td>{{ item.controlNumber }}</td>
                            <td>
                                {{ item.isbn }}/{{ item.issn }}
                            </td>
                            <td>
                                <p class="text-sm text-theme-davys-gray">
                                    {{ item.publisher }}
                                </p>
                                <p class="text-sm text-theme-davys-gray">
                                    {{ item.publicationYear }}
                                </p>
                            </td>
                            <td>
                                <kn-chip>{{ item.materialType }}</kn-chip>
                            </td>
                            <td>
                                <div class="flex text-sm text-shadow-theme-davys-gray">
                                    <a kn-button variant="transparent" [routerLink]="item.id">
                                        <span class="material-symbols-rounded"> visibility </span>
                                    </a>
                                    <a kn-button variant="transparent" [routerLink]="['update', item.id]">
                                        <span class="material-symbols-rounded"> edit_square </span>
                                    </a>
                                    <button kn-button variant="transparent">
                                        <span class="material-symbols-rounded"> delete </span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    } @empty {
                        <tr>
                            <td colspan="100%" class="text-center">No data to show</td>
                        </tr>
                    }
                </tbody>
            </table>
            <div class="w-full inline-flex justify-center">
                <kn-pagination
                    [totalCount]="queryResult.data.bibRecords?.totalCount ?? 0"
                    [pageSize]="pageSize"
                    (pageChanged)="changePage($event)"
                    (pageSizeChanged)="changePageSize($event)"
                />
            </div>
        </kn-panel>
    }
</div>
